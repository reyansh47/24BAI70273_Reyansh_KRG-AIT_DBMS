--unique not null delete foreign key-- FOR ORACLE FPREIGN KEY(USER_ID)REFERENCES LIBRARY_VISITORS(USER_ID)
--FOR ORACLE CREATE DATABASE DB_NAME ---> USE_DB
TRUNCATE TABLE BOOK_S RESTART IDENTITY

CREATE TABLE BOOK_S(
BOOK_ID INT PRIMARY KEY,
BOOK_NAME VARCHAR(20) NOT NULL UNIQUE,
AUTHOR_NAME VARCHAR(40) NOT NULL
)



ALTER TABLE BOOK_S
ADD BOOK_COUNT INT CHECK (BOOK_COUNT>0) NOT NULL


INSERT INTO BOOK_S VALUES(101,'HARRY POTTER','DAVID',1)

SELECT * FROM BOOK_S

CREATE TABLE LIBRARY_VISITORS(
USER_ID INT PRIMARY KEY,
USER_NAME VARCHAR(40) NOT NULL,
AGE INT CHECK(AGE>=17) NOT NULL,
EMAIL VARCHAR(40) NOT NULL UNIQUE
)

INSERT INTO LIBRARY_VISITORS(USER_ID,USER_NAME,AGE,EMAIL)
VALUES(501,'REYANSH ',19,'REYANSH@GMAIL.COM')

CREATE TABLE BOOK_ISSUE(
BOOK_ISSUE_ID INT PRIMARY KEY,
USER_ID INT NOT NULL,
BOOK_ID INT NOT NULL,
FOREIGN KEY(BOOK_ID) REFERENCES BOOK_S(BOOK_ID),
FOREIGN KEY(USER_ID) REFERENCES LIBRARY_VISITORS(USER_ID)
)



ALTER TABLE BOOK_ISSUE
ADD ISSUE_DATE DATE

INSERT INTO BOOK_ISSUE VALUES(1001,501,101,'2026-01-09')

SELECT * FROM BOOK_ISSUE

UPDATE BOOK_ISSUE
SET ISSUE_DATE ='2026-01-08'
WHERE BOOK_ISSUE_ID=1001

SELECT * FROM BOOK_ISSUE

CREATE ROLE LIBRARIAN_2
WITH LOGIN PASSWORD 'REYANSH'

SELECT CURRENT_USER


GRANT SELECT, INSERT, DELETE , UPDATE ON BOOK_S TO LIBRARIAN_2

GRANT SELECT, INSERT, DELETE , UPDATE ON BOOK_ISSUE TO LIBRARIAN_2

GRANT SELECT, INSERT, DELETE , UPDATE ON LIBRARY_VISITORS TO LIBRARIAN_2

REVOKE SELECT, INSERT, DELETE , UPDATE ON LIBRARY_VISITORS FROM LIBRARIAN_2



